\input texinfo
@c %**start of header
@settitle Carramba Libs API Reference 
@setfilename carramba-libs-1.info
@afourpaper
@documentlanguage en_US
@documentencoding UTF-8
@c %**end of header

@copying
This is Texinfo file of Carramba Libs API Reference, version 1.0
@sp 1
Copyright @copyright{}  2019  Pawel Sobotka.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
A copy of the license is included in the section entitled "GNU
Free Documentation License".
@sp 1
Examples and sources code included in this document are part of Carramba Libs.

Carramba Libs is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.

Carramba Libs is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
You should have received a copy of the GNU General Public License
along with Carramba Libs.  If not, see <@uref{http://www.gnu.org/licenses/}>.

@end copying

@titlepage
@title Carramba Libs API Reference
@subtitle version 1.0
@author Pawel Sobotka

@page
@vskip 0pt plus 1filll
@insertcopying
@end titlepage

@c Output the table of contents at the beginning
@contents

@ifnottex
@node Top
@top Carramba Libs API Reference

What is Carramba Libs? It is a library written for validate personal number like: PESEL, IBAN, NIP, REGON. These numbers are polish personal numbers and are use in Polish goverment administrations. For what was library such as Carramba Libs written? In many country, polish citizens travels, working and enjoys own free time. In business contacts knowledge whois my partner is very important and I will be told, nothing is much importants like these knowledge. Personal numbers like NIP and REGON identify the partner in business directly. When you travel outside our contry, PESEL number do these same. And is very important for users - > this library uses Open Source licensing models and you can look inside and test if it is useful and secure for you.
 
@menu
* A piece of theory::   introduction to theory of validation personal numbers.
* API function::        api function desciption
* Header file::	        caramba-libs.h header file
* Index::               Complete index.
* Copying::             Your rights and freedoms.
@end menu

@end ifnottex

@node A piece of theory, Index, Top
@chapter A piece of theory.
@cindex A piece of theory.

While checking the correctness of numbers, there is a simple rule: the whole number consists of numbers, each of these digits is multiplied by the balance and the last one, we add products and calculate the sum mod 10 (11), the final digit in the number is a checksum that must match the calculated.

@ifnottex

@menu
* PESEL number::
* NIP number::
* REGON number::
* IBAN number::
@end menu

@end ifnottex

@node PESEL number, NIP number, A piece of theory
@section PESEL number

The PESEL number consists of 10 digits, the last one(11) is a checksum. I will not describe the components of a PESEL number, all can be found on the Internet. Briefly, validation is done by:

@example
checksum = 
(a*1 + b*3 + c*7 + d*9 + e*1 + f*3 + g*7 + h*9 + i*1 + j*3) mod 10; 

sum = 10 - checksum;

if sum == 10; then sum = 0; => must be y = 0;

if sum == y; then return NUMBER_VALID; else return NUMBER_INVALID;

weight[] = @{1,3,7,9,1,1,3,7,9,1@}; => balance
@end example

@node NIP number, REGON number, PESEL number, A piece of theory
@section NIP number

The NIP number consists of 9 digits and the last 10 is the checksum. You can find out more about the NIP number on the Internet. How to calculate the checksum? It is very simple ...

@example

1 2 3 4 5 6 7 8 9 10 
a b c d e f g h i     -> next digits in the NIP number
x x x x x x x x x  y  -> the balance of each digit, y -> checksum

@end example

To calculate the checksum, multiply each digit by balance, add the products to each other and calculate the checksum mod 11

@example

checksum = 
(a*6 + b*5 + c*7 + d*2 + e*3 + f*4 + g*5 + h*6 + i*7) mod 11; 

if checksum == 10; then checksum = 0; => must be y = 0;

if checksum == y; then return NUMBER_VALID; else return NUMBER_INVALID;

weight[] = @{6,5,7,2,3,4,5,6,7@}; => balance

@end example

@node REGON number, IBAN number, A piece of theory, A piece of theory
@section REGON number

REGON number consists of 7, 9 or 14 digits, where the last of digits is a checksum. As with the numbers NIP and PESEL, digits from the REGON number are multiplied by the weight, the products are added to each other and the sum calculated modulo 11

@example

weight7[]  = @{2,3,4,5,6,7@};
weight9[]  = @{8,9,2,3,4,5,6,7@};
weight14[] = @{2,4,8,5,0,9,7,3,6,1,2,4,8@};
if checksum == 10; then checksum = 0; 

@end example

The calculation is made as for the other numbers.

@node IBAN number, API function, A piece of theory
@section IBAN number

@node API function, Header file, A piece of theory, Top
@chapter API function
@cindex API function, api, function

In this chapter I describe function provided by the library.

@example
int iban_validation_test(const char *iban)
int regon_validation_test(const char *regon)
int pesel_validation_test(const char *pesel)
int nip_validation_test(const char *nip)
const char *carramba_libs_version()
const char *carramba_libs_info(int format)
int carramba_libs_api_test(const char *number)
@end example

These function are provided by Carramba Libs Package, below I will provide a more detailed description of each function. 

@section IBAN validation function
@cindex iban, function, validation
@example
int iban_validation_test(const char* iban)
@end example

@section REGON validation function
@cindex regon, function, validation
@example
int regon_validation_test(const char* regon)
@end example

@section PESEL validation function
@cindex pesel, function, validation
@example
int pesel_validation_test(const char* pesel)
@end example

@section NIP validation function
@cindex nip, function, validation
@example
int nip_validation_test(const char* nip)
@end example

@section Carramba Libs version print
@cindex version, function, output, print
@example
const char* carramba_libs_version()
@end example

@section Carramba Libs info print
@cindex info, function, output, print
@example
const char* carramba_libs_info(int format);
@end example

@section Carramba Libs test function
@cindex test, function, implementation
@example
int carramba_libs_api_test(const char* number)
@end example

@node Header file, Index, API function, Top
@chapter Header file
@cindex carramba-libs.h, header file

@node Index, Copying, Top 
@unnumbered Index

@cindex Index
@printindex cp

@node Copying, Top
@appendix GNU Free Documentation License

@pindex FDL-1.3
@cindex GNU @command{FDL-1.3}
@include fdl-1.3.texi

@appendix GNU General Public License
@pindex GPL-3.0
@cindex GNU @command{GPL-3.0}
@include gpl-3.0.texi

@bye
